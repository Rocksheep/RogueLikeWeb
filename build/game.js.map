{"version":3,"sources":["webpack:///webpack/bootstrap 875310f3683d97037d1a","webpack:///./src/main.js","webpack:///./src/Game.js","webpack:///./src/entities/Player.js","webpack:///./src/map/GameMap.js","webpack:///./src/map/Tile.js","webpack:///./src/map/Rect.js","webpack:///./src/rendering/Sprite.js","webpack:///./src/rendering/MapRenderer.js"],"names":["window","addEventListener","init","canvas","document","getElementById","game","start","Game","width","height","squareSize","sprite","console","log","quit","renderers","ctx","getContext","gameMap","player","makeMap","push","e","keyPresses","update","movement","x","y","keyCode","destinationX","destinationY","isBlocked","move","draw","setTimeout","_clearScreen","index","render","fillStyle","fillRect","Player","visionRadius","visionVectors","computeVisionVectors","dx","dy","fovMap","undefined","i","vectorUnit","distanceTravelled","j","length","vx","Math","round","vy","abs","tiles","blockSight","radians","iterations","PI","cos","sin","vectorLength","sqrt","GameMap","initializeTiles","maxRooms","minRoomSize","maxRoomSize","rooms","numberOfRooms","r","w","floor","random","h","newRoom","intersected","intersects","center","coin","oldCenter","createHorizontalTunnel","createVerticalTunnel","createRoom","succeeded","type","room","x1","x2","y1","y2","blocked","min","max","Tile","explored","Rect","centerX","centerY","other","Sprite","image","spriteWidth","spriteHeight","Image","tmpImage","src","spriteX","spriteY","drawImage","MapRenderer","vision","wall","visible","globalAlpha"],"mappings":"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","file":"game.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 875310f3683d97037d1a","import Game from './Game';\n\n\nwindow.addEventListener('load', init);\n\nfunction init() {\n    let canvas = document.getElementById('canvas');\n    let game = new Game(canvas);\n    game.start();\n}\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Player from './entities/Player';\nimport GameMap from './map/GameMap';\nimport Sprite from './rendering/Sprite';\nimport MapRenderer from './rendering/MapRenderer';\n\nclass Game {\n\n    constructor(canvas) {\n        this.width = 50;\n        this.height = 35;\n        this.squareSize = 16;\n\n        this.sprite = new Sprite('../assets/img/entities.png', 16, 16);\n        console.log(this.sprite);\n        this.quit = false;\n        this.renderers = [];\n        this.canvas = canvas;\n        this.ctx = canvas.getContext('2d');\n        this.gameMap = null;\n        this.player = null;\n    }\n\n    start() {\n        this.player = new Player(0, 0, this.sprite);\n        this.gameMap = new GameMap(this.width, this.height, this.player);\n        this.gameMap.makeMap(20, 5, 10);\n        this.renderers.push(new MapRenderer(this.gameMap, this.sprite));\n\n\n        window.addEventListener('keydown', (e) => this.keyPresses(e));\n        this.update();\n    }\n\n    keyPresses(e) {\n        let movement = {x:0,y:0};\n        switch (e.keyCode) {\n            case 38:\n                movement.y = -1;\n                break;\n            case 39:\n                movement.x = 1;\n                break;\n            case 40:\n                movement.y = 1;\n                break;\n            case 37:\n                movement.x = -1;\n                break;\n        }\n\n        let destinationX = this.player.x + movement.x;\n        let destinationY = this.player.y + movement.y;\n\n        if (!this.gameMap.isBlocked(destinationX, destinationY)) {\n            this.player.move(movement.x, movement.y);\n        }\n    }\n\n    update() {\n        this.draw();\n\n        if (!this.quit) {\n            setTimeout(() => this.update(), 20);\n        }\n    }\n\n    draw() {\n        this._clearScreen()\n\n        for (var index in this.renderers) {\n            this.renderers[index].render(this.ctx);\n        }\n        // console.log('draw');\n\n        this.player.draw(this.ctx);\n    }\n\n    _clearScreen() {\n        this.ctx.fillStyle = '#000';\n        this.ctx.fillRect(0,0,800,600);\n    }\n}\n\nexport default Game;\n\n\n// WEBPACK FOOTER //\n// ./src/Game.js","class Player {\n\n    constructor(x, y, sprite) {\n        this.x = x;\n        this.y = y;\n        this.visionRadius = 9;\n        this.sprite = sprite;\n        this.visionVectors = this.computeVisionVectors();\n    }\n\n    move(dx, dy) {\n        this.x += dx;\n        this.y += dy;\n    }\n\n    draw(ctx) {\n        this.sprite.draw(ctx, 0, 0, this.x, this.y);\n    }\n\n    vision(gameMap) {\n        let fovMap = [];\n        for (let y = 0; y < gameMap.height; y++) {\n            for (let x = 0; x < gameMap.width; x++) {\n                if (fovMap[x] === undefined) {\n                    fovMap[x] = [];\n                }\n                fovMap[x][y] = false;\n            }\n        }\n\n        for (let i in this.visionVectors) {\n            let vectorUnit = this.visionVectors[i];\n            let distanceTravelled = 0;\n            // draw line of vision\n            let j = 1;\n            while (distanceTravelled < vectorUnit.length) {\n                let vx = Math.round(this.x + vectorUnit.x * j);\n                let vy = Math.round(this.y + vectorUnit.y * j);\n                distanceTravelled += Math.abs(vectorUnit.x) + Math.abs(vectorUnit.y);\n\n                fovMap[vx][vy] = true;\n                if (gameMap.tiles[vx][vy].blockSight) {\n                    break;\n                }\n                j++;\n            }\n        }\n        return fovMap;\n    }\n\n    computeVisionVectors() {\n        let visionVectors = [];\n        let radians = 0;\n        let iterations = 56;\n        for (let i = 0; i < iterations; i++) {\n            radians += (2 * Math.PI) / iterations;\n            let x = Math.round(this.visionRadius * Math.cos(radians)) + this.x;\n            let y = Math.round(this.visionRadius * Math.sin(radians)) + this.y;\n\n            let dx = x - this.x;\n            let dy = y - this.y;\n            let vectorLength = Math.sqrt(dx * dx + dy * dy);\n            let vectorUnit = {x: dx / vectorLength, y: dy / vectorLength, length: vectorLength};\n\n            visionVectors.push(vectorUnit);\n        }\n        return visionVectors;\n    }\n}\n\nexport default Player;\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/Player.js","import Tile from './Tile';\nimport Rect from './Rect';\n\nclass GameMap {\n\n    constructor(width, height, player) {\n        this.width = width;\n        this.height = height;\n        this.player = player;\n        this.tiles = this.initializeTiles();\n    }\n\n    initializeTiles() {\n        var tiles = [];\n        for (var y = 0; y < this.height; y++) {\n            for (var x = 0; x < this.width; x++) {\n                if (tiles[x] === undefined) {\n                    tiles[x] = [];\n                }\n                tiles[x][y] = new Tile(true);\n            }\n        }\n        return tiles;\n    }\n\n    makeMap(maxRooms, minRoomSize, maxRoomSize) {\n        this.rooms = [];\n        var numberOfRooms = 0;\n\n        for (var r = 0; r < maxRooms; r++ ) {\n            var w = Math.floor(Math.random() * (maxRoomSize - minRoomSize + 1) + minRoomSize);\n            var h = Math.floor(Math.random() * (maxRoomSize - minRoomSize + 1) + minRoomSize);\n\n            var x = Math.floor(Math.random() * (this.width - w -1));\n            var y = Math.floor(Math.random() * (this.height - h - 1));\n\n            var newRoom = new Rect(x, y, w, h);\n            var intersected = false;\n\n            for (var index in this.rooms) {\n                if (newRoom.intersects(this.rooms[index])) {\n                    intersected = true;\n                    break;\n                }\n            }\n            if (!intersected) {\n                var center = newRoom.center();\n                if (numberOfRooms === 0) {\n                    this.player.x = center.x;\n                    this.player.y = center.y;\n                }\n                else {\n                    var coin = Math.floor(Math.random() * 2) + 1;\n\n                    var oldCenter = this.rooms[numberOfRooms-1].center();\n                    if (coin === 1) {\n                        this.createHorizontalTunnel(center.x, oldCenter.x, center.y);\n                        this.createVerticalTunnel(oldCenter.x, center.y, oldCenter.y);\n                    }\n                    else {\n                        this.createVerticalTunnel(center.x, center.y, oldCenter.y);\n                        this.createHorizontalTunnel(center.x, oldCenter.x, oldCenter.y);\n                    }\n                }\n\n                this.createRoom(newRoom);\n                this.rooms.push(newRoom);\n                numberOfRooms++;\n            }\n        }\n\n\n        // determine tile types\n        for (var y = 0; y < this.height; y++) {\n            for (var x = 0; x < this.width; x++) {\n\n                //inner corner pieces\n                var succeeded = false;\n                if ((x > 0 && x < this.width - 1 && y > 0 && y < this.height - 1)) {\n                    if (!this.tiles[x+1][y].blockSight && !this.tiles[x][y-1].blockSight &&\n                        this.tiles[x-1][y].blockSight && this.tiles[x][y+1].blockSight) {\n                        this.tiles[x][y].type = 4;\n                        succeeded = true;\n                    }\n                    else if (!this.tiles[x-1][y].blockSight && !this.tiles[x][y+1].blockSight &&\n                        this.tiles[x+1][y].blockSight && this.tiles[x][y-1].blockSight) {\n                        this.tiles[x][y].type = 6;\n                        succeeded = true;\n                    }\n                    else if (!this.tiles[x+1][y].blockSight && !this.tiles[x][y+1].blockSight &&\n                        this.tiles[x-1][y].blockSight && this.tiles[x][y-1].blockSight) {\n                        this.tiles[x][y].type = 5;\n                        succeeded = true;\n                    }\n                    else if (!this.tiles[x-1][y].blockSight && !this.tiles[x][y-1].blockSight &&\n                        this.tiles[x+1][y].blockSight && this.tiles[x][y+1].blockSight) {\n                        this.tiles[x][y].type = 3;\n                        succeeded = true;\n                    }\n                }\n                if (!succeeded) {\n                    //vertical pieces\n                    if ((x < this.width - 1 && !this.tiles[x+1][y].blockSight) ||\n                        (x > 0 && !this.tiles[x-1][y].blockSight)) {\n                        this.tiles[x][y].type = 1;\n                    }\n\n                    //horizontal pieces\n                    else if((y < this.height - 1 && !this.tiles[x][y+1].blockSight) ||\n                        (y > 0 && !this.tiles[x][y-1].blockSight)) {\n                        this.tiles[x][y].type = 2;\n                    }\n\n                    //upper left corner\n                    else if(x < this.width - 1 && y < this.height - 1 && !this.tiles[x+1][y+1].blockSight) {\n                        this.tiles[x][y].type = 3;\n                    }\n                    //upper right corner\n                    else if(x > 0 && y < this.height - 1 && !this.tiles[x-1][y+1].blockSight) {\n                        this.tiles[x][y].type = 4;\n                    }\n                    //bottom right corner\n                    else if(x > 0 && y > 0 && !this.tiles[x-1][y-1].blockSight) {\n                        this.tiles[x][y].type = 5;\n                    }\n                    //bottom left corner\n                    else if(x < this.width - 1 && y > 0 && !this.tiles[x+1][y-1].blockSight) {\n                        this.tiles[x][y].type = 6;\n                    }\n                    else {\n                        this.tiles[x][y].type = 0;\n                    }\n                }\n            }\n        }\n    }\n\n    createRoom(room) {\n        for (var x = room.x1 + 1; x < room.x2 - 1; x++) {\n            for (var y = room.y1 + 1; y < room.y2 - 1; y++) {\n                this.tiles[x][y].blocked = false;\n                this.tiles[x][y].blockSight = false;\n            }\n        }\n    }\n\n    createHorizontalTunnel(x1, x2, y) {\n        for (var x = Math.min(x1, x2); x < Math.max(x1, x2) + 1; x++) {\n            this.tiles[x][y].blocked = false;\n            this.tiles[x][y].blockSight = false;\n        }\n    }\n\n    createVerticalTunnel(x, y1, y2) {\n        for (var y = Math.min(y1, y2); y < Math.max(y1, y2) + 1; y++) {\n            this.tiles[x][y].blocked = false;\n            this.tiles[x][y].blockSight = false;\n        }\n    }\n\n    isBlocked(x, y) {\n        return this.tiles[x][y].blocked;\n    }\n}\n\nexport default GameMap;\n\n\n// WEBPACK FOOTER //\n// ./src/map/GameMap.js","class Tile {\n\n    constructor(blocked, blockSight) {\n        this.blocked = blocked;\n\n        if (blockSight === undefined) {\n            blockSight = blocked;\n        }\n        this.blockSight = blockSight;\n        this.explored = false;\n    }\n\n}\n\nexport default Tile;\n\n\n// WEBPACK FOOTER //\n// ./src/map/Tile.js","class Rect {\n\n    constructor(x, y, width, height) {\n        this.x1 = x;\n        this.y1 = y;\n        this.x2 = x + width;\n        this.y2 = y + height;\n    };\n\n    center() {\n        var centerX = Math.floor((this.x1 + this.x2) / 2);\n        var centerY = Math.floor((this.y1 + this.y2) / 2);\n        return {x:centerX, y:centerY};\n    }\n\n    intersects(other) {\n        return (this.x1 <= other.x2 && this.x2 >= other.x1 &&\n        this.y1 <= other.y2 && this.y2 >= other.y1);\n    }\n}\n\nexport default Rect;\n\n\n// WEBPACK FOOTER //\n// ./src/map/Rect.js","class Sprite {\n\n    constructor(image, spriteWidth, spriteHeight) {\n        if (!(image instanceof Image)) {\n            var tmpImage = new Image();\n            tmpImage.src = image;\n            image = tmpImage;\n        }\n        this.image = image;\n        this.spriteWidth = spriteWidth;\n        this.spriteHeight = spriteHeight;\n    }\n\n    draw(ctx, spriteX, spriteY, x, y) {\n        ctx.drawImage(this.image, spriteX*16, spriteY*16, this.spriteWidth, this.spriteHeight, x*16, y*16, this.spriteWidth, this.spriteHeight);\n    }\n\n}\n\nexport default Sprite;\n\n\n// WEBPACK FOOTER //\n// ./src/rendering/Sprite.js","class MapRenderer {\n\n    constructor(gameMap, sprite) {\n        this.gameMap = gameMap;\n        console.log(this.gameMap);\n        this.sprite = sprite;\n    }\n\n    render(ctx) {\n        let fovMap = this.gameMap.player.vision(this.gameMap);\n        for (let y = 0; y < this.gameMap.height; y++) {\n            for (let x = 0; x < this.gameMap.width; x++) {\n                let wall = this.gameMap.tiles[x][y].blockSight;\n                let visible = fovMap[x][y];\n                if (visible || (this.gameMap.player.x === x && this.gameMap.player.y === y)) {\n                    ctx.globalAlpha = 1.0;\n                    // ctx.fillStyle = '#826e32';\n                    // ctx.fillRect(x*16, y*16, 16, 16);\n\n                    this.gameMap.tiles[x][y].explored = true;\n                }\n                else {\n                    ctx.globalAlpha = 0.4;\n                }\n                if (this.gameMap.tiles[x][y].explored) {\n                    if (wall) {\n                        if (this.gameMap.tiles[x][y].type === 1) {\n                            this.sprite.draw(ctx, 1, 0, x, y);\n                            // console.log('drawing');\n                            // ctx.drawImage(this.entitySprite, 16, 0, 16, 16, x*16, y*16, 16, 16);\n                        }\n                        if (this.gameMap.tiles[x][y].type === 2) {\n                            this.sprite.draw(ctx, 2, 0, x, y);\n                            // ctx.drawImage(this.entitySprite, 32, 0, 16, 16, x*16, y*16, 16, 16);\n                        }\n                        if (this.gameMap.tiles[x][y].type === 3) {\n                            this.sprite.draw(ctx, 4, 0, x, y);\n                            // ctx.drawImage(this.entitySprite, 16*4, 0, 16, 16, x*16, y*16, 16, 16);\n                        }\n                        if (this.gameMap.tiles[x][y].type === 4) {\n                            this.sprite.draw(ctx, 5, 0, x, y);\n                            // ctx.drawImage(this.entitySprite, 16*5, 0, 16, 16, x*16, y*16, 16, 16);\n                        }\n                        if (this.gameMap.tiles[x][y].type === 5) {\n                            this.sprite.draw(ctx, 6, 0, x, y);\n                            // ctx.drawImage(this.entitySprite, 16*6, 0, 16, 16, x*16, y*16, 16, 16);\n                        }\n                        if (this.gameMap.tiles[x][y].type === 6) {\n                            this.sprite.draw(ctx, 3, 0, x, y);\n                            // ctx.drawImage(this.entitySprite, 16*3, 0, 16, 16, x*16, y*16, 16, 16);\n                        }\n                    }\n                    else {\n                        this.sprite.draw(ctx, 7, 0, x, y);\n                        // ctx.drawImage(this.entitySprite, 16 * 7, 0, 16, 16, x*16, y*16, 16, 16);\n                    }\n                }\n                ctx.globalAlpha = 1;\n            }\n        }\n    }\n}\n\nexport default MapRenderer;\n\n\n// WEBPACK FOOTER //\n// ./src/rendering/MapRenderer.js"],"sourceRoot":""}